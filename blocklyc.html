<!--
  ~   TERMS OF USE: MIT License
  ~
  ~   Permission is hereby granted, free of charge, to any person obtaining a
  ~   copy of this software and associated documentation files (the "Software"),
  ~   to deal in the Software without restriction, including without limitation
  ~   the rights to use, copy, modify, merge, publish, distribute, sublicense,
  ~   and/or sell copies of the Software, and to permit persons to whom the
  ~   Software is furnished to do so, subject to the following conditions:
  ~
  ~   The above copyright notice and this permission notice shall be included in
  ~   all copies or substantial portions of the Software.
  ~
  ~   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~   FITNESS FOR A PARTICULAR PURPOSE AND NONINFINGEMENT. IN NO EVENT SHALL
  ~   THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  ~   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  ~   DEALINGS IN THE SOFTWARE.
  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <noscript>
        <style>
            #noScript {
                margin-top: 10px;
                margin-left: 30px;
                background-color: #B94A48;
                color: #FFFFFF;
                font-size: large;
            }
        </style>
    </noscript>
    <meta charset="utf-8">
    <meta name="base" content="">
    <meta name="cdn" content="src/">
    <meta name="projectlink" content="">
    <meta name="isOffline" content="true">
    <meta name="docker" content="true">

    <!-- BlockyProp Client download links -->
    <meta name="win32client" content="http://downloads.parallax.com/blockly/clients/BlocklyPropClient-setup-32.exe">
    <meta name="win32zipclient" content="http://downloads.parallax.com/blockly/clients/BlocklyPropClient-setup-32.zip">
    <meta name="win64client" content="http://downloads.parallax.com/blockly/clients/BlocklyPropClient-setup-64.exe">
    <meta name="win64zipclient" content="http://downloads.parallax.com/blockly/clients/BlocklyPropClient-setup-64.zip">
    <meta name="macOSclient" content="http://downloads.parallax.com/blockly/clients/BlocklyPropClient-setup-MacOS.pkg">
    <meta name="win64launcher" content="http://downloads.parallax.com/blockly/launcher/Setup-BPLauncher-Win.exe">
    <meta name="win64ziplauncher" content="http://downloads.parallax.com/blockly/launcher/Setup-BPLauncher-Win.exe.zip">
    <meta name="macOSlauncher" content="http://downloads.parallax.com/blockly/launcher/Setup-BPLauncher-MacOS.zip">

    <meta name="application-name" content="BlocklyProp Solo" />
    <meta name="msapplication-TileColor" content="#FFFFFF" />
    <meta name="msapplication-TileImage" content="src/images/mstile-144x144.png" />

    <link type="image/png" rel="icon" sizes="32x32" href="src/images/favicon-32x32.png" />
    <link type="image/png" rel="icon" sizes="16x16" href="src/images/favicon-16x16.png" />

    <link type="image/png" rel="apple-touch-icon-precomposed" sizes="57x57"
        href="src/images/apple-touch-icon-57x57.png" />
    <link type="image/png" rel="apple-touch-icon-precomposed" sizes="114x114"
        href="src/images/apple-touch-icon-114x114.png" />
    <link type="image/png" rel="apple-touch-icon-precomposed" sizes="72x72"
        href="src/images/apple-touch-icon-72x72.png" />
    <link type="image/png" rel="apple-touch-icon-precomposed" sizes="144x144"
        href="src/images/apple-touch-icon-144x144.png" />
    <link type="image/png" rel="apple-touch-icon-precomposed" sizes="120x120"
        href="src/images/apple-touch-icon-120x120.png" />
    <link type="image/png" rel="apple-touch-icon-precomposed" sizes="152x152"
        href="src/images/apple-touch-icon-152x152.png" />

    <title>BlocklyProp Solo</title>

    <!-- JavaScript libraries -->
    <script src="https://browser.sentry-cdn.com/5.12.1/bundle.min.js"
            integrity="sha384-y+an4eARFKvjzOivf/Z7JtMJhaN6b+lLQ5oFbBbUwZNNVir39cYtkjW1r6Xjbxg3"
            crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="src/lib/chartist.min.js"></script>
    <script type="text/javascript" src="src/lib/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="src/lib/jquery.validate.min.js"></script>
    <script type="text/javascript" src="src/lib/beautify.js"></script>
    <script type="text/javascript" src="src/lib/bootstrap/core/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="src/lib/bootstrap/plugins/bootbox.min.js"></script>
    <script type="text/javascript" src="src/lib/ace/ace.js"></script>
    <script type="text/javascript" src="src/lib/FileSaver.min.js"></script>
    <script type="text/javascript" src="src/lib/jszip.min.js"></script>

    <!-- Javascript helpers -->
    <script type="text/javascript" src="src/globals.js"></script>
    <script type="text/javascript" src="src/utils.js"></script>
    <script type="text/javascript" src="src/project.js"></script>
    <script type="text/javascript" src="src/propterm.js"></script>
    <script type="text/javascript" src="src/blocklypropclient.js"></script>
    <script type="text/javascript" src="src/blocklyc.js"></script>
    <script type="text/javascript" src="src/editor.js"></script>
    <script type="text/javascript" src="src/modals.js"></script>
    <!-- <script type="text/javascript" src="src/localcompile.js"></script> -->

    <!-- Blockly core/PropC generator -->
    <script type="text/javascript" src="src/lib/blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc.js"></script>
    <script type="text/javascript" src="src/blockly/generators/field_ace.js"></script>

    <!-- Internationalization text strings -->
    <script type="text/javascript" src="src/blockly/language/en/messages.js"></script>

    <!-- Block Menu/Toolbox -->
    <script type="text/javascript" src="src/blockly/generators/propcToolbox.js"></script>

    <!-- Block definitions -->
    <script type="text/javascript" src="src/blockly/generators/propc/base.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/control.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/variables.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/procedures.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/gpio.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/communicate.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/sensors.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/heb.js"></script>
    <script type="text/javascript" src="src/blockly/generators/propc/s3.js"></script>

    <!-- Style sheets -->
    <link href="src/lib/chartist.min.css" rel="stylesheet" type="text/css" />
    <link href="src/lib/bootstrap/core/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="src/style-editor.css" rel="stylesheet" type="text/css" />
    <link href="src/style-clientdownload.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="editor" style="background-color:#f8f8f8; padding-top:0; padding-bottom:5px;">
        <!-- Branding logo -->
        <div id="branding" style="position: relative; top: 2px;">
            <a id="nav-logo" href="/" class="url-prefix"></a>
        </div>

        <div id="noScript">
            <noscript title="BlocklyProp-Solo">
                <p>This site works best if JavaScript is enabled in your browser.</p>
            </noscript>
        </div>


        <div>
            <!-- Above toolbar -->
            <div style="overflow:auto;">

                <!-- BlocklyProp Client or Loader UI -->
                <div id="client-status-alerts" style="float: left;">
                    <span class="auth-true" style="padding-left: 10px; line-height: 30px;">
                        <span id="client-unavailable" class="bp-client-danger">
                            <a class="client-unavailable-link" data-toggle="modal" data-target="#client-download-modal"
                                href="#">
                                <span class="bpIcon" data-icon="dangerTriangle">!!</span>
                                <span class="keyed-lang-string" data-key="editor_client_not-available"></span>
                            </a>
                        </span>
                        <span id="client-available" class="bp-client-available keyed-lang-string hidden"
                            data-key="editor_client_available">
                        </span>
                        <span id="client-available-short" class="bp-client-available keyed-lang-string hidden"
                            data-key="editor_client_available_short">
                        </span>
                    </span>
                </div>

                <!-- Display current project name -->
                <div id="project-details" class="project-name-wrapper"
                    style="float:right; position: relative; top: 2px;">
                    <div class="project-icon"></div>
                    <div class="project-name" spellcheck="false"></div>
                    <div class="project-owner" style="display: none;"></div>
                </div>
            </div>

            <!-- Toolbars and hamburger menu -->
            <div>
                <!-- Left Toolbar buttons -->
                <div id="board-action-buttons" style="padding-left: 10px; float: left;">
                    <!-- Compile program -->
                    <a id="prop-btn-comp" class="btn btn-success btn-circle auth-true" title=""
                    data-toggle="tooltip" data-placement="bottom" data-displayas="inline-block">
                        <span class="bpIcon" data-icon="checkMarkWhite">&#x2713;</span>
                    </a>

                    <!-- Load to RAM -->
                    <a id="prop-btn-ram" class="btn btn-success btn-circle disabled auth-true client-action no-s3" title=""
                    data-toggle="tooltip" data-placement="bottom" data-displayas="inline-block">
                        <span class="bpIcon" data-icon="downArrowWhite"></span>
                    </a>

                    <!-- Load to EEPROM -->
                    <a id="prop-btn-eeprom" class="btn btn-success btn-circle disabled auth-true client-action" title=""
                    data-toggle="tooltip" data-placement="bottom" data-displayas="inline-block">
                        <span class="bpIcon" data-icon="downArrowBoxWhite">&gt;&gt;</span></a>

                    <!-- Open a terminal -->
                    <a id="prop-btn-term" class="btn btn-primary btn-circle disabled auth-true client-action" title=""
                    data-toggle="tooltip"  data-placement="bottom" data-displayas="inline-block">
                        <span class="bpIcon" data-icon="terminalWhite">#</span>
                    </a>

                    <!-- Open a graphing window -->
                    <a id="prop-btn-graph" class="btn btn-primary btn-circle disabled auth-true client-action no-s3" title=""
                    data-toggle="tooltip"  data-placement="bottom" data-displayas="inline-block">
                        <span class="bpIcon" data-icon="graphWhite">~</span>
                    </a>

                    <!-- Find and replace - propc project type -->
                    <a id="prop-btn-find-replace" class="btn btn-info btn-circle propc-only hidden" title=""
                    data-toggle="tooltip" data-placement="bottom">
                        <span class="bpIcon" data-icon="searchWhite">&#x1F50E;</span>
                    </a>

                    <!-- Clean up source code -->
                    <a id="prop-btn-pretty" class="btn btn-info btn-circle propc-only hidden" title=""
                    data-toggle="tooltip" data-placement="bottom">
                        <span class="bpIcon" data-icon="magicWandWhite">&#x2728;</span>
                    </a>

                    <!-- Undo edits - propc project type -->
                    <a id="prop-btn-undo" class="btn btn-info btn-circle propc-only hidden" title=""
                    data-toggle="tooltip" data-placement="bottom">
                        <span class="bpIcon" data-icon="undoWhite">&#x293A;</span>
                    </a>

                    <!-- Redo edits - propc project type -->
                    <a id="prop-btn-redo" class="btn btn-info btn-circle propc-only hidden" title=""
                    data-toggle="tooltip" data-placement="bottom">
                        <span class="bpIcon" data-icon="redoWhite">&#x293B;</span>
                    </a>

                    <!-- Drop-down hardware port select -->
                    <select id="comPort" class="dropdown port-dropdown auth-true select-css" title="Ports"
                            data-displayas="inline-block" data-placement="left">
                    </select>
                </div>

                <!-- Right Toolbar buttons and menu -->
                <div id="right-menus" style="float:right; padding-right: 15px;">
                    <!-- View C source code -->
                    <a class="btn-view-blocks" id="btn-view-propc" style="display: none;">
                            <span class="bpIcon" data-icon="eyeWhite">&#x1F441;</span>
                            &nbsp;
                            <span class="keyed-lang-string" data-key="menu_code"></span>
                        </a>

                    <!-- View project blocks layout -->
                    <a class="btn-view-blocks" id="btn-view-blocks" style="display: none;">
                            <span class="bpIcon" data-icon="eyeWhite">&#x1F441;</span>
                            &nbsp;
                            <span class="keyed-lang-string" data-key="menu_blocks"></span>
                        </a>

                    <!-- View project XML code -->
                    <a class="btn-view-blocks" id="btn-view-xml" style="display: none;">
                            <span class="bpIcon" data-icon="eyeWhite">&#x1F441;</span>
                            &nbsp;&nbsp;
                            <span class="keyed-lang-string" data-key="editor_view_xml"></span>
                        </a>

                    <!-- New Project button -->
                    <a id="new-project-button" class="demo-function btn-view-blocks" style="display: inline-block;" data-displayas="inline-block">
                        <span class="keyed-lang-string" data-key="editor_new_button"></span>
                    </a>

                    <!-- Open Project button -->
                    <a id="open-project-button" class="demo-function btn-view-blocks" style="display: inline-block;" data-displayas="inline-block">
                        <span class="keyed-lang-string" data-key="editor_open_button"></span>
                    </a>

                    <!-- Save project button -->
                    <a class="demo-function btn-view-blocks" id="save-project" style="display: inline-block;" data-displayas="inline-block">
                        <span class="keyed-lang-string" data-key="editor_save"></span>
                    </a>

                    <!-- Drop-down hamburger menu -->
                    <div class="dropdown" style="display: inline-block;">
                        <!-- down-arrow control to open hamburger menu -->
                        <button id="options-menu" class="btn btn-sm btn-default dropdown dropdown-toggle" type="button"
                            data-toggle="dropdown">&#9776;<span class="caret"></span>
                        </button>

                        <ul class="dropdown-menu pull-right btn-sm">
                            <li class="auth-true" data-displayas="list-item">
                                <a id="edit-project-details" href="#">
                                    <span class="keyed-lang-string" data-key="editor_edit-details"></span>
                                </a>
                            </li>

                            <li class="online-only divider"></li>

                            <li>
                                <a id="online-help" class="url-prefix" href="https://learn.parallax.com/ab-blocks" target="_blank">
                                    <span class="keyed-lang-string" data-key="menu_help_reference"></span>
                                </a>
                            </li>

                            <li class="divider"></li>

                            <li>
                                <a id="download-side" href="#">
                                    <span class="keyed-lang-string" data-key="menu_download_simpleide"></span>
                                </a>
                            </li>

                            <li class="auth-true" data-displayas="list-item">
                                <a id="upload-project">
                                    <span class="keyed-lang-string" data-key="editor_upload"></span>
                                </a>
                            </li>

                            <li class="auth-true divider" data-displayas="list-item"></li>

                            <li class="auth-true" data-displayas="list-item">
                                <a id="client-setup">
                                    <span class="keyed-lang-string" data-key="editor_run_configure"></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PropC native coding toolbar -->
    <div id="find-replace" style="background-color: #ddd; display: none; padding: 5px;">
        <span class="keyed-lang-string indent-left-double" data-key="editor_find_label"></span>
        <input type="text" class="input-find-replace" id="propc-find" name="propc-find" />&nbsp;
        <button id="propc-find-btn" class="btn-view-blocks btn-find-replace keyed-lang-string"
            data-key="editor_find_next"></button>
        <span class="keyed-lang-string indent-left-double" data-key="editor_replace_label"></span>
        <input type="text" class="input-find-replace" id="propc-replace" name="propc-replace" />&nbsp;
        <button id="propc-replace-btn" class="btn-view-blocks btn-find-replace keyed-lang-string"
            data-key="editor_replace"></button>
        <button id="find-replace-close" class="close margin-left-double">&times;</button>
    </div>

    <!-- Blockly canvas -->
    <div id="content">
        <!-- Display Blockly blocks -->
        <div id="content_blocks" style="position: absolute; z-index: 10;"></div>

        <!-- Display Prop-C code -->
        <div id="content_propc">
            <div id="code-propc"></div>
        </div>

        <!-- Display XML representation of blocks -->
        <div id="content_xml">
            <div id="code-xml"></div>
        </div>
    </div>

    <!-- Possible one of two -->
    <!-- Save or Upload a project file -->
    <div class="modal fade" id="upload-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- Closes the dialog when the button is clicked -->
                    <button id="upload-close" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="upload-dialog-title" class="modal-title keyed-lang-string" data-key="editor_upload">&nbsp;
                    </h4>
                </div>
                <div class="modal-body">
                    <!-- Upload a project. Results stored in localStorage -->
                    <label class="control-label keyed-lang-string" data-key="editor_upload_selectfile"></label>
                    <input id="selectfile" type="file" accept=".svg,image/svg+xml" onchange="uploadHandler(this.files);">

                    <div id="selectfile-verify-valid" class="alert alert-success" style="display: none;">
                        <span class="bpIcon" data-icon="checkMarkGreen">&#x2713;</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_upload_valid"></span>
                    </div>
                    <!-- Uploaded file failed sanity checks -->
                    <div id="selectfile-verify-notvalid" class="alert alert-danger" style="display: none;">
                        <span class="bpIcon" data-icon="dangerTriangle">!!</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_upload_notvalid"></span>
                    </div>

                    <!-- Board type has changed -->
                    <div id="selectfile-verify-boardtype" class="alert alert-warning" style="display: none;">
                        <span class="bpIcon" data-icon="warningCircle">!</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_upload_boardtype_warning"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="selectfile-replace" class="btn btn-danger btn-sm keyed-lang-string"
                        data-key="editor_button_replace" onclick="uploadMergeCode(false);"></button>

                    <button id="selectfile-append" class="btn btn-primary btn-sm keyed-lang-string"
                        data-key="editor_button_append" onclick="uploadMergeCode(true);"></button>

                    <!-- Closes the dialog when the button is clicked -->
                    <button id="selectfile-clear" class="btn btn-default btn-sm keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_cancel"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Project save timer modal dialog -->
    <div class="modal fade" id="save-check-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- Place an 'X' in the upper right corner to allow the dialog to be dismissed -->
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="save-check-title" class="modal-title keyed-lang-string" data-key="editor_save-check">&nbsp;
                    </h4>
                </div>
                <div class="modal-body">
                    <div id="save-check-warning">
                        <span class="bpIcon" data-icon="dangerTriangleBlack">!!</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_save-check_warning"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_close"></button>
                    <button id="save-as-btn" class="btn btn-default keyed-lang-string"
                        data-key="project_saveaslink"></button>
                    <button id="save-btn" class="btn btn-primary keyed-lang-string" data-dismiss="modal"
                        data-key="project_savelink"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- TODO: Help dialog is probably not used -->
    <div class="modal fade" id="help-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="help-dialog-title" class="modal-title keyed-lang-string" data-key="help_reference">&nbsp;
                    </h4>
                </div>
                <div class="modal-body" id="help-content"></div>
                <div class="modal-footer">
                    <button class="btn btn-default keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_close"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Compile program modal dialog -->
    <div id="compile-dialog" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="compile-dialog-title" class="modal-title keyed-lang-string"
                        data-key="editor_run_compile">nbsp;
                    </h4>
                </div>
                <div class="modal-body">
                    <label for="compile-console" class="keyed-lang-string" data-key="editor_title_result"></label>
                    <textarea class="form-control" rows="15" id="compile-console"></textarea>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_close"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Terminal -->
    <div class="modal fade" id="console-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="console-dialog-title" class="modal-title keyed-lang-string"
                        data-key="editor_title_terminal">&nbsp;</h4>
                </div>
                <div class="modal-body">
                    <div class="connection-string"></div>
                    <div id="serial_console" class="prop-term"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_close"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Graph window -->
    <div class="modal fade" id="graphing-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="graphing-dialog-title" class="modal-title keyed-lang-string"
                        data-key="editor_title_graphing">&nbsp;</h4>
                </div>
                <div class="modal-body" style="height: 445px;">
                    <div class="connection-string"></div>
                    <table>
                        <tr>
                            <td>
                                <div id="serial_graphing" class="ct-chart ct-perfect-fourth" style="width:500px;"></div>
                                <div id="graph_x-axis_label" style="text-align:center;" class="keyed-lang-string"
                                    data-key="editor_graph_time_label"></div>
                            </td>
                            <td style="vertical-align: top;">
                                <div id="serial_graphing_labels"></div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer clearfix">
                    <button id="btn-graph-play" data-toggle="tooltip" title="" data-placement="bottom"
                        class="btn btn-primary btn-circle pull-left bpIcon" data-icon="pauseWhite"></button>&nbsp;
                    <button id="btn-graph-snapshot" data-toggle="tooltip" title="" data-placement="bottom"
                        class="btn btn-success btn-circle pull-left bpIcon" data-icon="cameraWhite"></button>&nbsp;
                    <button id="btn-graph-csv" data-toggle="tooltip" title="" data-placement="bottom"
                        class="btn btn-success btn-circle pull-left bpIcon" data-icon="fileWhite"></button>&nbsp;
                    <button id="btn-graph-clear" data-toggle="tooltip" title="" data-placement="bottom"
                        class="btn btn-primary btn-circle pull-left bpIcon" data-icon="eraserWhite"></button>&nbsp;
                    <button class="btn btn-default keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_close"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save project with a new board type dialog -->
    <div class="modal fade" id="save-as-type-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="save-as-type-dialog-title" class="modal-title keyed-lang-string" data-key="editor_save-as">
                        &nbsp;</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="save-as-project-name" class="keyed-lang-string"
                            data-key="project_create_project_name"></label>
                        <input type="text" class="form-control" id="save-as-project-name" name="save-as-project-name" />
                    </div>
                    <div class="form-group">
                        <label for="save-as-board-type" class="keyed-lang-string"
                            data-key="project_create_board_type"></label>
                        <select id="save-as-board-type" class="form-control" name="save-as-board-type">
                            <option disabled selected class="keyed-lang-string"
                                data-key="project_create_board_type_select">&nbsp;</option>
                        </select>
                        <span id="saveAsDialogSender" style="display:none;"></span>
                    </div>
                    <div id="save-as-verify-boardtype" class="alert alert-warning" style="display: none;">
                        <span class="bpIcon" data-icon="dangerTriangle"></span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_saveas_boardtype_warning"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default keyed-lang-string" data-dismiss="modal"
                        data-key="editor_button_close"></button>
                    <button id="save-as-board-btn" class="btn btn-primary keyed-lang-string" data-dismiss="modal"
                        data-key="editor_save-as"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- New project modal dialog -->
    <div class="modal fade" id="new-project-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 id="new-project-dialog-title" class="modal-title keyed-lang-string"
                        data-key="editor_new_project_title"></h4>
                </div>

                <div class="modal-body">
                    <form class="proj">
                        <fieldset>
                            <!-- project name -->
                            <div class="form-group">
                                <label for="new-project-name" class="keyed-lang-string" data-key="project_name"></label>
                                <input id="new-project-name" class="form-control" type="text" name="new-project-name" />
                            </div>
                            <!-- project board type -->
                            <div id="new-project-board-dropdown" class="form-group">
                                <label for="new-project-board-type" class="keyed-lang-string"
                                       data-key="project_create_board_type"></label>
                                <select id="new-project-board-type" class="form-control"
                                        name="new-project-board-type"></select>
                            </div>
                            <!-- project meta data display -->
                            <div id="edit-project-details-static" class="form-group hidden">
                                <strong class="keyed-lang-string" data-key="project_create_board_type"></strong>:&nbsp;<span
                                    id="edit-project-board-type"></span><br>
                                <strong class="keyed-lang-string" data-key="project_created"></strong>:&nbsp;<span
                                    id="edit-project-created-date"></span><br>
                                <strong class="keyed-lang-string" data-key="project_modified"></strong>:&nbsp;<span
                                    id="edit-project-last-modified"></span>
                            </div>
                            <!-- project description -->
                            <div class="form-group">
                                <label for="new-project-description" class="keyed-lang-string"
                                       data-key="project_create_description"></label>
                                <textarea id="new-project-description" class="form-control" rows="7"
                                          name="new-project-description"></textarea>
                            </div>
                        </fieldset>
                    </form>
                </div>

                <!-- footer -->
                <div class="modal-footer">
                    <button id="new-project-cancel" class="btn btn-default keyed-lang-string"
                            data-key="editor_button_cancel"></button>
                    <button id="new-project-continue" class="btn btn-primary keyed-lang-string"
                            data-key="editor_button_continue"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Save or Upload a project file -->
    <div class="modal fade" id="open-project-dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- Closes the dialog when the button is clicked -->
                    <button id="open-project-close" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 id="open-project-dialog-title" class="modal-title keyed-lang-string" data-key="editor_upload">
                        <span>&nbsp;QQQQ</span>
                    </h4>
                </div>
                <div class="modal-body">
                    <!-- Upload a project. Results stored in localStorage -->
                    <label class="control-label keyed-lang-string" data-key="editor_upload_selectfile"></label>
                    <input id="open-project-select-file" type="file" accept=".svg, .svge"
                           onchange="uploadHandler(this.files);">

                    <!-- File is valid message -->
                    <div id="open-project-select-file-verify-valid" class="alert alert-success" style="display: none;">
                        <span class="bpIcon" data-icon="checkMarkGreen">&#x2713;</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_upload_valid"></span>
                    </div>

                    <!-- Uploaded file failed sanity checks -->
                    <div id="open-project-select-file-verify-not-valid" class="alert alert-danger" style="display: none;">
                        <span class="bpIcon" data-icon="dangerTriangle">!!</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_upload_notvalid"></span>
                    </div>

                    <!-- Board type has changed -->
                    <div id="open-project-select-file-verify-board-type" class="alert alert-warning" style="display: none;">
                        <span class="bpIcon" data-icon="warningCircle">!</span>&nbsp;
                        <span class="keyed-lang-string" data-key="editor_upload_boardtype_warning"></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="open-project-select-file-cancel" class="btn btn-default btn-sm keyed-lang-string"
                            data-dismiss="modal" data-key="editor_button_cancel"></button>
                    <button id="open-project-select-file-open" class="btn btn-primary btn-sm keyed-lang-string"
                            data-key="editor_button_open"></button>
                </div>
            </div>
        </div>
    </div>



    <!-- Edit project details modal -->
    <div class="modal fade" id="edit-project-dialog">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 id="edit-project-dialog-title" class="modal-title keyed-lang-string"
                        data-key="editor_edit-details">&nbsp;</h4>
                </div>

                <div class="modal-body">
                    <form id="edit-project-form" class="proj">
                        <!-- project name. Default is derived from projectData object -->
                        <div class="form-group">
                            <label for="edit-project-name" class="keyed-lang-string" data-key="project_name"></label>
                            <input type="text" class="form-control" id="edit-project-name" name="edit-project-name" />
                        </div>
                        <!-- project meta data display -->
                        <div id="edit-project-details-ro" class="form-group">
                            <strong class="keyed-lang-string" data-key="project_create_board_type"></strong>:&nbsp;<span
                                id="edit-project-board-type-ro"></span><br>
                            <strong class="keyed-lang-string" data-key="project_created"></strong>:&nbsp;<span
                                id="edit-project-created-date-ro"></span><br>
                            <strong class="keyed-lang-string" data-key="project_modified"></strong>:&nbsp;<span
                                id="edit-project-last-modified-ro"></span>
                        </div>
                        <!-- project description -->
                        <div class="form-group">
                            <label for="new-project-description" class="keyed-lang-string"
                                   data-key="project_create_description"></label>
                            <textarea id="edit-project-description" class="form-control"  rows="7"
                                      name="new-project-description"></textarea>
                        </div>
                        <!-- Hidden field to store a mode. possible values are 'open' and '' -->
<!--
                        <div id="open-modal-sender" class="hidden"></div>
-->
                    </form>
                </div>

                <!-- footer -->
                <div class="modal-footer">
                    <button id="edit-project-cancel" class="btn btn-default keyed-lang-string"
                            data-key="editor_button_cancel"></button>
                    <button id="edit-project-continue" class="btn btn-primary keyed-lang-string"
                            data-key="editor_button_continue"></button>
                </div>
            </div>
        </div>
    </div>

    <!-- BlocklyProp Client download instructions -->
    <div class="modal fade" id="client-download-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title keyed-lang-string" data-key="editor_client_title">&nbsp;</h4>
                </div>

                <div class="modal-body">
                    <div class="clients">

                        <!-- MacOS instructions -->
                        <div class="client-instructions MacOS">
                            <h4><span class="keyed-lang-string" data-key="client_macOS_run_title"></span>&nbsp;</h4>
                            <div style="background:#f5f5f5; border-radius:6px; padding:6px;">
                                <div id="mac1">
                                    <table>
                                        <tr>
                                            <td>
                                                <p class="keyed-lang-string" data-key="client_macOS_run_instructions1"></p>
                                                <p class="keyed-lang-string" data-key="client_run_instructions2"></p>
                                            </td>
                                            <td>
                                                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                                        data-src="images/client-run/mac_os.png"
                                                        alt="Instructions to launch the client" 
                                                        style="padding:10px"/>
                                            </td>
                                        </tr>
                                        </table>
                                </div>
                            </div>
                        </div>

                        <!-- Windows instructions -->
                        <div class="client-instructions Windows">
                            <h4 class="keyed-lang-string" data-key="client_windows_run_title">&nbsp;</h4>
                            <div style="background:#f5f5f5; border-radius:6px; padding:6px;">
                                <div id="win1">
                                    <table>
                                        <tr>
                                            <td>
                                                <p class="keyed-lang-string" data-key="client_windows_run_instructions1"></p>
                                                <p class="keyed-lang-string" data-key="client_run_instructions2"></p>
                                            </td>
                                            <td>
                                                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                                        data-src="images/client-run/windows.png"
                                                        alt="Instructions to launch the client"
                                                        style="padding:10px"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Chrome OS instructions -->
                        <div class="client-instructions ChromeOS">
                            <h4 class="keyed-lang-string" data-key="client_chrome_run_title">&nbsp;</h4>
                            <div style="background:#f5f5f5; border-radius:6px; padding:6px;">
                                <div id="chr1">
                                    <table>
                                        <tr>
                                            <td>
                                                <p class="keyed-lang-string" data-key="client_chrome_run_instructions1"></p>
                                                <p class="keyed-lang-string" data-key="client_run_instructions2"></p>
                                            </td>
                                            <td>
                                                <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                                        data-src="images/client-run/chrome.png"
                                                        alt="Instructions to launch the client"
                                                        style="padding:10px"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <hr />

                        <div id="client-instructions-copy"></div>
                    </div>
                    <hr />
                    <div class="dropup" style="display: inline-block;">
                        <button class="btn btn-sm btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                            <span class="keyed-lang-string" data-key="clientdownload_os_menu"></span>
                            <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a href="#" class="show-os-win"><span class="keyed-lang-string"
                                        data-key="os_name_win"></span></a></li>
                            <li><a href="#" class="show-os-mac"><span class="keyed-lang-string"
                                        data-key="os_name_mac"></span></a></li>
                            <li><a href="#" class="show-os-chr"><span class="keyed-lang-string"
                                        data-key="os_name_chr"></span></a></li>
                            <!-- <li><a href="#" class="show-os-lnx"><span class="keyed-lang-string" data-key="os_name_lnx"></span></a></li> -->
                        </ul>
                    </div>
                    <button style="display:inline-block; margin-left:20px;" 
                            class="btn btn-sm btn-primary" 
                            onclick="$('.bpc-old').removeClass('hidden'); $(this).addClass('hidden');">
                        Show BlocklyProp-Client (older) downloads</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal window that enumerates the versions of the client installer available -->
    <div class="modal fade" id="client-version-modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title keyed-lang-string" data-key="editor_client_title">&nbsp;</h4>
                </div>

                <div class="modal-body">
                    <!-- BPC/BPL version warning -->
                    <div id="client-warning-span" class="alert alert-warning bpc-version hidden">
                        <span class="bpIcon" data-icon="warningCircle"></span>&nbsp;
                        <span class="keyed-lang-string" data-key="client_update_warning"></span>
                    </div>
                    <div id="client-unknown-span" class="alert alert-danger bpc-version hidden">
                        <span class="bpIcon" data-icon="dangerTriangle"></span>&nbsp;
                        <span class="keyed-lang-string" data-key="client_unknown"></span>
                    </div>
                    <div id="client-danger-span" class="alert alert-danger bpc-version hidden">
                        <span class="bpIcon" data-icon="dangerTriangle"></span>&nbsp;
                        <span class="keyed-lang-string" data-key="client_update_danger"></span>
                    </div>
                    <hr />

                    <div class="clients" id="client-instructions-original">

                        <!-- MacOS client -->
                        <div class="client-instructions MacOS">
                            <h4 class="keyed-lang-string" data-key="clientdownload_download_installer">&nbsp;</h4>
                        </div>

                        <!-- MacOS Launcher -->
                        <div class="client MacOS">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                data-src="images/os-icons/mac_os.png" alt="Mac OS icon" />
                            <a href="#" class="launcher-mac-link">
                                <span class="keyed-lang-string"
                                    data-key="clientdownload_launcher_macos_installer"></span></a>
                        </div>

                        <!-- MacOS Client -->
                        <div class="client MacOS bpc-old hidden">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                data-src="images/os-icons/mac_os.png" alt="Mac OS icon" />
                            <a href="#" class="client-mac-link">
                                <span class="keyed-lang-string"
                                    data-key="clientdownload_client_macos_installer"></span></a>
                        </div>

                        <!-- Windows clients -->
                        <div class="client-instructions Windows">
                            <h4 class="keyed-lang-string" data-key="clientdownload_download_installer">&nbsp;</h4>
                        </div>

                        <!-- Windows x64 Launcher -->
                        <div class="client Windows">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                data-src="images/os-icons/windows.png" alt="Windows OS icon" />
                            <a href="#" class="launcher-win64-link">
                                <span class="keyed-lang-string"
                                    data-key="clientdownload_launcher_windows64_installer"></span>
                            </a>
                        </div>


                        <!-- Windows x64 Launcher -->
                        <div class="client Windows">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                 data-src="images/os-icons/windows.png" alt="Windows OS icon" />
                            <a href="#" class="launcher-win64zip-link">
                                <span class="keyed-lang-string"
                                      data-key="clientdownload_launcher_windows64zip_installer"></span>
                            </a>
                        </div>

                        <!-- Windows x32 client -->
                        <div class="client Windows bpc-old hidden">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                data-src="images/os-icons/windows.png" alt="Windows OS icon" />
                            <a href="#" class="client-win32-link">
                                <span class="keyed-lang-string"
                                    data-key="clientdownload_client_windows32_installer"></span>
                            </a>
                        </div>

                        <!-- Windows x32 client zip file -->
                        <div class="client Windows bpc-old hidden">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                 data-src="images/os-icons/windows.png" alt="Windows OS icon" />
                            <a href="#" class="client-win32zip-link">
                                <span class="keyed-lang-string"
                                      data-key="clientdownload_client_windows32zip_installer"></span>
                            </a>
                        </div>

                        <!-- Windows x64 client -->
                        <div class="client Windows bpc-old hidden">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                data-src="images/os-icons/windows.png" alt="Windows OS icon" />
                            <a href="#" class="client-win64-link">
                                <span class="keyed-lang-string"
                                    data-key="clientdownload_client_windows64_installer"></span>
                            </a>
                        </div>


                        <!-- Windows x64 client -->
                        <div class="client Windows bpc-old hidden">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                 data-src="images/os-icons/windows.png" alt="Windows OS icon" />
                            <a href="#" class="client-win64zip-link">
                                <span class="keyed-lang-string"
                                      data-key="clientdownload_client_windows64zip_installer"></span>
                            </a>
                        </div>

                        <!-- ChromeOS client -->
                        <div class="client-instructions ChromeOS">
                            <h4 class="keyed-lang-string" data-key="clientdownload_download_launcher">&nbsp;</h4>
                        </div>

                        <!-- Get client from the Google App Store -->
                        <div class="client ChromeOS">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
                                data-src="images/os-icons/chrome_os.png" alt="Chrome OS icon" />
                            <a href="https://chrome.google.com/webstore/detail/iddpgcclgepllhnhlkkinbmmafpbnddb"
                                target="_blank">
                                <span class="keyed-lang-string" data-key="clientdownload_client_chromeos_installer"></span>
                            </a>
                        </div>
                    </div>

                    <hr />

                    <div class="dropup">
                        <button class="btn btn-sm btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                            <span class="keyed-lang-string" data-key="clientdownload_os_menu"></span>
                            <span class="caret"></span>
                        </button>

                        <ul class="dropdown-menu">
                            <li>
                                <a href="#" class="show-os-win">
                                    <span class="keyed-lang-string" data-key="os_name_win"></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="show-os-mac">
                                    <span class="keyed-lang-string" data-key="os_name_mac"></span>
                                </a>
                            </li>
                            <li>
                                <a href="#" class="show-os-chr">
                                    <span class="keyed-lang-string" data-key="os_name_chr"></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <button style="display: inline;"
                            class="btn btn-sm btn-primary"
                            onclick="$('.bpc-old').removeClass('hidden'); $(this).addClass('hidden');">
                        Show BlocklyProp-Client (older) downloads</button>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal"><span class="keyed-lang-string"
                            data-key="editor_button_close"></span></button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
